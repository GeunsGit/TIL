# 싱글톤 패턴(Singleton Pattern)
## 싱글톤 패턴이란?
* 디자인 패턴(Design Pattern) 중 하나
* 하나의 클래스에 대해서 단일객체(단일 인스턴스 instance)를 사용하는 패턴
  * 다른 말로 객체의 인스턴스가 오직 1개만 생성되는 패턴
### 설계 규칙

- 싱글톤 패턴을 구현하는 방법은 여러가지가 있다. 다음 방법은 객체를 미리 생성해두는 가장 단순하고 안전한 방법이다.

1. private 생성자
2. public static 싱글톤클래스이름 getInstance() {}
3. private static 싱글톤클래스이름 instance = new 싱글톤클래스이름();

```java
    /** 단일 인스턴스 멤버 변수 : Singleton Pattern */
    private static Singleton instance = new BookManager();

    /** 기본 생성자 : Singleton Pattern */
    private Sigleton() {}
    
    /** 단일 인스턴스 반환 : Singleton Pattern */
    public static Singleton getInstance() {
		return instance;
	}
```
-------------
### 사용 방법 
* 직접 객체를 생성하는 것은 불가능하다 !
* 싱글톤클래스이름 참조변수명 = 싱글톤클래스이름.getInstance();
-------------
### 사용하는 이유는 ?
- 여러 개의 객체가 필요 없을 때
    * stateless object : 수정 가능한 멤버 변수가 없고 기능만 있는 객체
- 객체의 재사용이 생성/삭제보다 유리할 때
-------------
### 싱글톤 패턴의 장점
- 데이터 공유가 쉽다
    * 싱글톤 인스턴스는 전역으로 사용되기 때문에 다른 클래스의 인스턴스들이 접근하기 쉽다 !
- 메모리 낭비 방지
    * 처음 한번의 new 연산자로 고정된 메모리 영역을 사용하기 때문에 이후 객체에 접근할 때 메모리 낭비를 방지할 수 있다 !
-------------
### 싱글톤 방식의 주의점
- 싱글톤 패턴이나 스프링과 같은 싱글톤 컨테이너를 사용하든, 객체 인스턴스를 하나만 생성해서 공유하는 싱글톤 방식은 여러 클라이언트가 하나의 같은 객체 인스턴스를 공유하기 때문에 싱글톤 객체는 상태를 유지(stateful)하게 설계하면 안된다.
- 무상태(stateless)로 설계해야 한다.
	* 특정 클라이언트에 의존적인 필드가 있으면 X
	* 특정 클라이언트가 값을 변경할 수 있는 필드가 있으면 X
	* 가급적 읽기만 가능해야 한다.
	* 필드 대신에 자바에서 공유되지 않는, 지역변수, 파라미터, ThreadLocal 등을 사용해야 한다.
-------------
### 문제점
* 싱글톤 패턴을 구현하는 코드 자체가 많이 들어간다.
* 의존관계쌍 클라이언트가 구체 클래스에 의존한다. -> DIP를 위반한다.
* 클라이언트가 구체 클래스에 의존해서 OCP 원칙을 위반할 가능성이 높다.
* 생성자가 private 접근제한이기 때문에 상속이 불가능하다. 즉, 자식 클래스를 만들기 어렵다.
* 생성 방식이 제한적이기 때문에 테스트하기가 힘들다.
* 테스트하기 어렵다.
* 내부 속성을 변경하거나 초기화하기 어렵다.
* 유연성이 떨어진다.
* 싱글톤 객체는 전역 상태로 사용되기 쉬운데, 객체지향 프로그래밍에서 권장되지 않는 방식이다.
-------------
### 학습한 내용과 느낀 점
* 싱글톤 패턴은 객체를 1번만 생성하고도 재사용할 수 있어 비용적인 부분에서 많은 장점이 있다는 것을 느꼈다.
* 하지만 이런 효율적인 면만 봐서는 좋아보이지만, 안티패턴이라고 불릴 만큼 여러 단점과 객체 지향에 위반되는 사항들이 있었다.
* 현재 공부하고 있는 Spring 에서는 스프링 객체(빈)들이 컨테이너를 통해 싱글톤 스콥으로 관리되고 있다.
* 이를 통해 싱글톤 패턴의 문제점을 보완하면서 객체지향스러운 개발을 할 수 있도록 돕고 있다.
* 어쩌면 종속적일 수도 있는 프레임워크(스프링)의 사용이 오히려 객체지향의 장점을 살리는 점이 신선했다 !